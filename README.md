# SRT LLM Processor

The SRT LLM Processor is a post-processing tool that cleans and refines subtitles generated by speech recognition systems using large language models.

It automatically fixes capitalization, removes filler words, corrects grammar, applies speaker self-corrections, and formats URLs/emails - transforming raw speech-to-text output into polished, professional subtitles.

Inspired by [alejandrosnz/srt-llm-translator](https://github.com/alejandrosnz/srt-llm-translator).

![Demo](demo.gif)

## What Gets Fixed?

The processor applies five types of cleanup:

### 1. Capitalization & Punctuation
```
Input:  "hello my name is john smith"
Output: "Hello, my name is John Smith."
```

### 2. Filler Words & Stutters
```
Input:  "Um, so like, I I think we should, uh, go now"
Output: "I think we should go now."
```

### 3. Grammar Correction
```
Input:  "She don't understand what they was saying"
Output: "She doesn't understand what they were saying."
```

### 4. Self-Corrections
```
Input:  "Meet me at 8pm, actually I mean 9pm"
Output: "Meet me at 9pm."
```

### 5. URL/Email Formatting
```
Input:  "Visit example dot com or email us at info at example dot com"
Output: "Visit example.com or email us at info@example.com"
```

## Features
- Fixes capitalization and punctuation automatically
- Removes filler words and stutters (um, uh, like, repetitions)
- Corrects grammar and sentence structure
- Applies speaker self-corrections (e.g., "8pm, I mean 9pm" → "9pm")
- Formats URLs and emails (e.g., "example dot com" → "example.com")
- Auto-detects language for context-aware processing
- Maintains original timestamps for perfect synchronization
- Supports multiple LLM providers (OpenAI, Gemini, Grok, OpenRouter)
- Concurrent batch processing for high performance

## Installation

Set up your LLM provider:
```bash
export OPENAI_API_URL=https://openrouter.ai/api/v1
export OPENAI_API_KEY='your_OpenRouter_api_key'
export OPENAI_MODEL=meta-llama/llama-3.2-3b-instruct
```

### Using uv

First, clone the repo:

```bash
git clone https://github.com/BirkhoffLee/srt-llm-processor
```

Process a single SRT file:
```bash
uv run main.py --file /path/to/subtitles.srt
```

Process all SRT files in a folder:

```bash
uv run main.py --folder /path/to/dir/
```

The processed file will be saved as `<original_name>.processed.srt` in the same directory.

### Using Nix

If you have Nix with flakes enabled, you can run the processor directly without any installation:

```bash
# Run directly from GitHub
nix run github:BirkhoffLee/srt-llm-processor -- --file /path/to/subtitles.srt

# Process all SRT files in a folder
nix run github:BirkhoffLee/srt-llm-processor -- --folder /path/to/dir/
```

> **Note:** Arguments to the processor must come after `--` when using `nix run`.

You can also enter a development shell with `uv` and Python available:

```bash
git clone https://github.com/BirkhoffLee/srt-llm-processor
cd srt-llm-processor
nix develop
uv run main.py --file /path/to/subtitles.srt
```

